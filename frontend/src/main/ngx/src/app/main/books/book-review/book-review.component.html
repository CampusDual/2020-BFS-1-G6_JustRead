<div *ngIf="review.user_" class="card mx-auto my-3 w-75">
  <div class="card-header">
    <app-book-rating
      class="text-right"
      [rating]="review.review_score"
    ></app-book-rating>
  </div>
  <div class="card-body container-fluid m-0">
    <div class="row">
      <div class="m-auto col-md-auto d-block">
        <img
          class="rounded-circle my-2"
          id="avatar"
          [src]="getImageSrc(review.picture)"
          *ngIf="review.picture; else noPicture"
        />
        <ng-template #noPicture>
          <img
            class="rounded-circle my-2"
            id="avatar"
            src="../../../assets/images/user_profile.png"
          />
        </ng-template>
        <h5 class="mx-3">{{ review.user_ }}</h5>
      </div>
      <div class="col">
        <p *ngIf="!review.is_spoiler; else spoiler" class="px-6 py-2">
          {{ review.review_text }}
        </p>
        <ng-template #spoiler>
          <div *ngIf="!showSpoiler; else show">
            <p class="px-6 py-2">
              Este comentario contiene spoilers, si deseas verlo haz
              <span class="btn btn-link p-0" (click)="showSpoiler = true"
                >click aquí</span
              >
            </p>
          </div>
          <ng-template #show>
            <p class="px-6 py-2">
              {{ review.review_text }}
            </p>
          </ng-template>
        </ng-template>
      </div>
    </div>
  </div>
  <div class="card-footer text-center">
    <div *ngIf="review.review_last_update; else createDate">
      <small class="text-muted"
        >Fecha última edición:
        {{ review.review_last_update | date: "hh:mm - dd/MM/yyyy" }}</small
      >
    </div>
    <ng-template #createDate>
      <small class="text-muted"
        >Fecha:
        {{ review.review_create_date | date: "hh:mm - dd/MM/yyyy" }}</small
      >
    </ng-template>
  </div>
</div>
